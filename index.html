<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>City Life Economy Sim</title>
  <link rel="stylesheet" href="src/css/styles.css">
</head>
<body>
  <div class="app">
    <aside class="sidebar">
      <h1>City Life Sim</h1>
      <div class="subtitle">Top-down sandbox with finite resources and a live economy chain.</div>

      <div class="controls">
        <button id="addPersonBtn">Add Person</button>
        <button id="removeSelectedBtn" class="danger">Remove Selected</button>
        <button id="removeRandomBtn" class="danger">Remove Random</button>
        <button id="pauseBtn">Pause</button>
      </div>

      <div class="controls controls-two">
        <button id="saveBtn">Save</button>
        <button id="loadBtn">Load</button>
      </div>

      <div class="controls controls-three">
        <button id="speed1Btn" class="active">x1</button>
        <button id="speed3Btn">x3</button>
        <button id="speed6Btn">x6</button>
      </div>

      <div class="controls controls-three">
        <button id="zoomOutBtn">-</button>
        <button id="zoomResetBtn">100%</button>
        <button id="zoomInBtn">+</button>
      </div>
      <div class="mini zoom-text" id="zoomStat">Zoom: 100%</div>

      <div class="stat-grid">
        <div class="stat-card">
          <div class="stat-label">Population</div>
          <div class="stat-value" id="popStat">0</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">City Stage</div>
          <div class="stat-value" id="stageStat" style="font-size: 15px;">Subsistence</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">Day</div>
          <div class="stat-value" id="dayStat">1</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">Market Cash</div>
          <div class="stat-value" id="marketCashStat">0</div>
        </div>
      </div>

      <div class="legend">
        <div><b>Person Colors</b></div>
        <div class="legend-row"><span><span class="dot" style="background:#d0d95c"></span>Forager</span><span>Wild food/herbs</span></div>
        <div class="legend-row"><span><span class="dot" style="background:#63b35d"></span>Farmer</span><span>Farm output</span></div>
        <div class="legend-row"><span><span class="dot" style="background:#5f8f53"></span>Woodcutter</span><span>Forest logs</span></div>
        <div class="legend-row"><span><span class="dot" style="background:#5fa3d1"></span>Sawmill</span><span>Logs -> planks</span></div>
        <div class="legend-row"><span><span class="dot" style="background:#9d88d8"></span>Carpenter</span><span>Planks -> furniture</span></div>
        <div class="legend-row"><span><span class="dot" style="background:#db7070"></span>Medic</span><span>Herbs -> medkits</span></div>
        <div class="legend-row"><span><span class="dot" style="background:#9f9f9f"></span>Unemployed</span><span>No demand/work</span></div>
      </div>

      <div class="small-note">
        Core loop: people age, lose health, earn money through production, buy food/medkits, and depend on downstream demand.
        If furniture demand drops, workshop slows, sawmill slows, and woodcutters lose work.
      </div>
    </aside>

    <main class="world-wrap">
      <canvas id="world"></canvas>
      <div class="overlay" id="overlayText"></div>
    </main>

    <aside class="rightbar">
      <div class="person-card" id="personCard">
        <h2>No person selected</h2>
        <div class="mini">Click any person on the map to inspect stats and needs.</div>
      </div>

      <div class="person-card">
        <h2>Market Stocks</h2>
        <table class="table" id="marketTable"></table>
      </div>

      <div class="person-card">
        <h2>Recent Events</h2>
        <div class="event-log" id="eventLog"></div>
      </div>
    </aside>
  </div>

  <script defer src="src/js/config.js"></script>
  <script defer src="src/js/camera.js"></script>
  <script defer src="src/js/storage.js"></script>
  <script defer src="src/js/game.js"></script>
</body>
</html>
